{"version":3,"sources":["typedefs/typedefs.ts","telemetry/generateGuid.ts","telemetry/events.ts","components/selectionManager.ts","components/selectionIdBuilder.ts","versioning/VisualAdapter.ts","versioning/VisualSafeExecutionWrapper.ts","versioning/versions/v1.0.0.ts","versioning/versions/v1.1.0.ts"],"names":[],"mappings":"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","file":"VisualsExtensibility.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n///<reference path=\"../../Typedefs/jquery/jquery.d.ts\"/>\r\n///<reference path=\"../../Typedefs/globalize/globalize.d.ts\"/>\r\n///<reference path=\"../../Typedefs/lodash/lodash.d.ts\"/>\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n    /**\r\n     * Creates a client-side Guid string.\r\n     * @returns A string representation of a Guid.\r\n     */\r\n    export function generateGuid(): string {\r\n        let guid = \"\",\r\n            idx = 0;\r\n\r\n        for (idx = 0; idx < 32; idx += 1) {\r\n            let guidDigitsItem = Math.random() * 16 | 0;\r\n            switch (idx) {\r\n                case 8:\r\n                case 12:\r\n                case 16:\r\n                case 20:\r\n                    guid += \"-\";\r\n                    break;\r\n            }\r\n            guid += guidDigitsItem.toString(16);\r\n        }\r\n\r\n        return guid;\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n\r\n    /**\r\n    * Event fired when a visual is loaded through the visual adapter\r\n    * @param name Name (guid) of the visual. \r\n    * @param apiVersion Api version used by the visual. \r\n    * @param custom Is the visual custom? \r\n    * @param parentId Id of the parent event \r\n    * @param isError True - action failed. \r\n    * @param errorSource Source of the error. PowerBI = PowerBI has a problem, External = External Service (e.g. on-prem AS server is down), User = User error (e.g. uploading too much and hitting resource limitations. \r\n    * @param errorCode PowerBI Error Code \r\n    *\r\n    * Generated by: Extensibility/events.bond\r\n    */\r\n\r\n    export declare var ExtensibilityVisualApiUsageLoggers: number;\r\n\r\n    export var ExtensibilityVisualApiUsage = function(name: string, apiVersion: string, custom: boolean, parentId: string, isError: boolean = false, errorSource: ErrorSource = undefined, errorCode: string = undefined): ITelemetryEventI<IPBIExtensibilityVisualApiUsage> {\r\n        var info = {\r\n            name: name,\r\n            apiVersion: apiVersion,\r\n            custom: custom,\r\n            parentId: parentId,\r\n            isError: isError,\r\n            errorSource: errorSource,\r\n            errorCode: errorCode,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIExtensibilityVisualApiUsage> = {\r\n            name: 'PBI.Extensibility.VisualApiUsage',\r\n            category: TelemetryCategory.CustomerAction,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    name: info.name,\r\n                    apiVersion: info.apiVersion,\r\n                    custom: info.custom,\r\n                    parentId: info.parentId,\r\n                    isError: info.isError,\r\n                };\r\n                if (typeof info.errorSource !== 'undefined') {\r\n                    formattedObject['errorSource'] = ErrorSource[info.errorSource];\r\n                }\r\n                if (typeof info.errorCode !== 'undefined') {\r\n                    formattedObject['errorCode'] = info.errorCode;\r\n                }\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof ExtensibilityVisualApiUsageLoggers !== 'undefined') {\r\n            event.loggers = ExtensibilityVisualApiUsageLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n\r\n    /**\r\n    * Event fired for uncaught exception in IVisual.\r\n    * @param visualType Type of the visual. \r\n    * @param isCustom Is the visual custom? \r\n    * @param apiVersion Api version used by the visual \r\n    * @param source Source URL \r\n    * @param lineNumber Line number \r\n    * @param columnNumber Column number \r\n    * @param stack Stack trace \r\n    * @param message Error exception message. \r\n    *\r\n    * Generated by JsCommon/commonTelemetryEvents.bond\r\n    */\r\n\r\n    export declare var VisualExceptionLoggers: number;\r\n\r\n    export var VisualException = function(visualType: string, isCustom: boolean, apiVersion: string, source: string, lineNumber: number, columnNumber: number, stack: string, message: string): ITelemetryEventI<IPBIVisualException> {\r\n        var info = {\r\n            visualType: visualType,\r\n            isCustom: isCustom,\r\n            apiVersion: apiVersion,\r\n            source: source,\r\n            lineNumber: lineNumber,\r\n            columnNumber: columnNumber,\r\n            stack: stack,\r\n            message: message,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIVisualException> = {\r\n            name: 'PBI.VisualException',\r\n            category: TelemetryCategory.CriticalError,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    visualType: info.visualType,\r\n                    isCustom: info.isCustom,\r\n                    apiVersion: info.apiVersion,\r\n                    source: info.source,\r\n                    lineNumber: info.lineNumber,\r\n                    columnNumber: info.columnNumber,\r\n                    stack: info.stack,\r\n                    message: info.message,\r\n                };\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof VisualExceptionLoggers !== 'undefined') {\r\n            event.loggers = VisualExceptionLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n}","/*\r\n*  Power BI Visualizations\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved. \r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*   \r\n*  The above copyright notice and this permission notice shall be included in \r\n*  all copies or substantial portions of the Software.\r\n*   \r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\nmodule powerbi.extensibility {\r\n    import IPoint = visuals.IPoint;\r\n\r\n    export interface SelectionManagerOptions{\r\n        hostServices: IVisualHostServices;\r\n    };\r\n\r\n    export class SelectionManager implements ISelectionManager {\r\n        private selectedIds: ISelectionId[];\r\n        private hostServices: IVisualHostServices;\r\n        private promiseFactory: IPromiseFactory;\r\n\r\n        public constructor(options: SelectionManagerOptions) {\r\n            this.hostServices = options.hostServices;\r\n            this.selectedIds = [];\r\n            this.promiseFactory = this.hostServices.promiseFactory();\r\n        }\r\n        \r\n        public select(selectionId: ISelectionId, multiSelect: boolean = false): IPromise<ISelectionId[]> {\r\n            let deferred: IDeferred<data.Selector[]> = this.promiseFactory.defer();\r\n            \r\n            if (this.hostServices.shouldRetainSelection()) {\r\n                this.sendSelectionToHost([selectionId]);\r\n            }\r\n            else {\r\n                this.selectInternal(selectionId, multiSelect);\r\n                this.sendSelectionToHost(this.selectedIds);\r\n            }\r\n\r\n            deferred.resolve(this.selectedIds);\r\n            return deferred.promise;\r\n        }\r\n\r\n        public showContextMenu(selectionId: ISelectionId, position: IPoint): IPromise<{}> {\r\n            let deferred: IDeferred<{}> = this.promiseFactory.defer();\r\n\r\n            this.sendContextMenuToHost(selectionId, position);\r\n\r\n            deferred.resolve(null);\r\n            return deferred.promise;\r\n        }\r\n\r\n        public hasSelection(): boolean {\r\n            return this.selectedIds.length > 0;\r\n        }\r\n\r\n        public clear(): IPromise<{}> {\r\n            let deferred = this.promiseFactory.defer();\r\n            this.selectedIds = [];\r\n            this.sendSelectionToHost([]);\r\n            deferred.resolve(null);\r\n            return deferred.promise;\r\n        }\r\n\r\n        public getSelectionIds(): ISelectionId[] {\r\n            return this.selectedIds;\r\n        }\r\n\r\n        private sendSelectionToHost(ids: ISelectionId[]) {\r\n            let selectArgs: SelectEventArgs = {\r\n                data: ids\r\n                    .filter((value: ISelectionId) => (<visuals.SelectionId>value).hasIdentity())\r\n                    .map((value: ISelectionId) => (<visuals.SelectionId>value).getSelector())\r\n            };\r\n\r\n            let data2 = this.getSelectorsByColumn(ids);\r\n\r\n            if (!_.isEmpty(data2))\r\n                selectArgs.data2 = data2;\r\n\r\n            this.hostServices.onSelect(selectArgs);\r\n        }\r\n\r\n        private sendContextMenuToHost(selectionId: ISelectionId, position: IPoint): void {\r\n            let selectors = this.getSelectorsByColumn([selectionId]);\r\n            if (_.isEmpty(selectors))\r\n                return;\r\n\r\n            let args: ContextMenuArgs = {\r\n                data: selectors,\r\n                position: position\r\n            };\r\n\r\n            this.hostServices.onContextMenu(args);\r\n        }\r\n\r\n        private getSelectorsByColumn(selectionIds: ISelectionId[]): SelectorsByColumn[] {\r\n            return _(selectionIds)\r\n                .filter(value => (<visuals.SelectionId>value).hasIdentity)\r\n                .map(value => (<visuals.SelectionId>value).getSelectorsByColumn())\r\n                .compact()\r\n                .value();\r\n        }\r\n\r\n        private selectInternal(selectionId: ISelectionId, multiSelect: boolean) {\r\n            if (SelectionManager.containsSelection(this.selectedIds, selectionId)) {\r\n                this.selectedIds = multiSelect\r\n                    ? this.selectedIds.filter(d => !(<visuals.SelectionId>selectionId).equals(<visuals.SelectionId>d))\r\n                    : this.selectedIds.length > 1\r\n                        ? [selectionId] : [];\r\n            } else {\r\n                if (multiSelect)\r\n                    this.selectedIds.push(selectionId);\r\n                else\r\n                    this.selectedIds = [selectionId];\r\n            }\r\n        }\r\n\r\n        public static containsSelection(list: ISelectionId[], id: ISelectionId) {\r\n            return list.some(d => (<visuals.SelectionId>id).equals(<visuals.SelectionId>d));\r\n        }\r\n    }\r\n} ","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n    /**\r\n     * This class is designed to simplify the creation of SelectionId objects\r\n     * It allows chaining to build up an object before calling 'create' to build a SelectionId\r\n     */\r\n    export class SelectionIdBuilder implements ISelectionIdBuilder {\r\n        private dataMap: SelectorForColumn;\r\n        private measure: string;\r\n\r\n        public withCategory(categoryColumn: DataViewCategoryColumn, index: number): this{\r\n            if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\r\n                this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\r\n            \r\n            return this;\r\n        }\r\n\r\n        public withSeries(seriesColumn: DataViewValueColumns, valueColumn: DataViewValueColumn | DataViewValueColumnGroup): this {\r\n            if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\r\n                this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\r\n\r\n            return this;\r\n        }\r\n\r\n        public withMeasure(measureId: string): this {\r\n            this.measure = measureId;\r\n\r\n            return this;\r\n        }\r\n\r\n        public createSelectionId(): ISelectionId {\r\n            return visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\r\n        }\r\n\r\n        private ensureDataMap(): SelectorForColumn {\r\n            if (!this.dataMap)\r\n                this.dataMap = {};\r\n\r\n            return this.dataMap;\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import ExtensibilityVisualApiUsage = visuals.telemetry.ExtensibilityVisualApiUsage;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n\r\n    //TODO: refactor this into a service\r\n    export let visualApiVersions: VisualVersion[] = [];\r\n\r\n    export function createVisualAdapter(visualPlugin: IVisualPlugin, telemetryService?: powerbi.ITelemetryService | ITelemetryService): powerbi.IVisual {\r\n        let visualTelemetryInfo: VisualTelemetryInfo = {\r\n            name: visualPlugin.name,\r\n            apiVersion: visualPlugin.apiVersion,\r\n            custom: !!visualPlugin.custom\r\n        };\r\n        return new VisualSafeExecutionWrapper(new VisualAdapter(visualPlugin, <ITelemetryService>telemetryService), visualTelemetryInfo, <ITelemetryService>telemetryService);\r\n    }\r\n\r\n    export class VisualAdapter implements powerbi.IVisual, WrappedVisual {\r\n        private visual: powerbi.IVisual | powerbi.extensibility.IVisual;\r\n        private apiVersionIndex: number;\r\n        private plugin: powerbi.IVisualPlugin;\r\n        private telemetryService: ITelemetryService;\r\n        private legacy: boolean;\r\n\r\n        constructor(visualPlugin: IVisualPlugin, telemetryService?: ITelemetryService) {\r\n            this.telemetryService = telemetryService;\r\n            this.plugin = visualPlugin;\r\n            \r\n            let version = visualPlugin.apiVersion;\r\n            let versionIndex = this.getVersionIndex(version);\r\n            let isError = false;\r\n            \r\n            if (!version) {\r\n                this.legacy = true;\r\n            }\r\n            else if (versionIndex > -1) {\r\n                this.apiVersionIndex = versionIndex;\r\n                this.legacy = false;\r\n            }\r\n            else {\r\n                debug.assertFail(\"The API version '\" + version + \"' is invalid.\");\r\n                isError = true;\r\n            }\r\n\r\n            if (this.telemetryService) {\r\n                this.telemetryService.logEvent(\r\n                    ExtensibilityVisualApiUsage,\r\n                    this.plugin.name,\r\n                    this.plugin.apiVersion,\r\n                    !!this.plugin.custom,\r\n                    undefined,\r\n                    isError,\r\n                    visuals.telemetry.ErrorSource.User\r\n                );\r\n            }\r\n        }\r\n\r\n        public init(options: powerbi.VisualInitOptions) {\r\n\r\n            options.element.empty();\r\n\r\n            if (this.legacy) {\r\n                this.visual = this.plugin.create();\r\n                this.visualLegacy.init(options);\r\n            }\r\n            else {\r\n                let host = visualApiVersions[this.apiVersionIndex].hostAdapter(options.host);\r\n                this.visual = this.plugin.create({\r\n                    element: options.element.get(0),\r\n                    host: host\r\n                });\r\n                this.overloadMethods();\r\n            }\r\n        }\r\n\r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (options.type & VisualUpdateType.Resize && this.visualHasMethod('onResizing')) {\r\n                this.onResizing(options.viewport, options.resizeMode);\r\n            } else if (this.visualHasMethod('update')) {\r\n                this.visualLegacy.update(options);\r\n            } else {\r\n                if (!options.type || options.type & VisualUpdateType.Data) {\r\n                    this.onDataChanged(<VisualDataChangedOptions>_.pick(options, ['dataViews', 'operationKind']));\r\n                }\r\n                if (options.type & VisualUpdateType.ViewMode) {\r\n                    this.onViewModeChanged(options.viewMode);\r\n                }\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.visualHasMethod('destroy')) {\r\n                this.visualLegacy.destroy();\r\n            }\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (!this.visualHasMethod('enumerateObjectInstances')) {\r\n                return;\r\n            }\r\n            return this.visualLegacy.enumerateObjectInstances(options);\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport, resizeMode: ResizeMode): void {\r\n            if (this.visualHasMethod('onResizing')) {\r\n                this.visualLegacy.onResizing(finalViewport, resizeMode);\r\n            }\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.visualHasMethod('onDataChanged')) {\r\n                this.visualLegacy.onDataChanged(options);\r\n            }\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.visualHasMethod('onViewModeChanged')) {\r\n                this.visualLegacy.onViewModeChanged(viewMode);\r\n            }\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.visualHasMethod('onClearSelection')) {\r\n                this.visualLegacy.onClearSelection();\r\n            }\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.visualHasMethod('canResizeTo')) {\r\n                return this.visualLegacy.canResizeTo(viewport);\r\n            }\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualNew(): powerbi.extensibility.IVisual {\r\n            if (this.legacy) return;\r\n            return <powerbi.extensibility.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualLegacy(): powerbi.IVisual {\r\n            if (!this.legacy) return;\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private visualHasMethod(methodName: string): boolean {\r\n            let visual = this.legacy ? this.visualLegacy : this.visualNew;\r\n            return visual && _.isFunction(visual[methodName]);\r\n        }\r\n\r\n        private getVersionIndex(version: string): number {\r\n            if (version) {\r\n                let versionCount = extensibility.visualApiVersions.length;\r\n                for (let i = 0; i < versionCount; i++) {\r\n                    if (extensibility.visualApiVersions[i].version === version) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        private overloadMethods(): void {\r\n            let overloads = this.getCompiledOverloads();\r\n            for (let key in overloads) {\r\n                this[key] = overloads[key];\r\n            }\r\n        }\r\n\r\n        private getCompiledOverloads(): VisualVersionOverloads {\r\n            let overloads: VisualVersionOverloads = {};\r\n            let versionIndex = this.apiVersionIndex;\r\n            let visualNew = this.visualNew;\r\n            for (let i = 0; i <= versionIndex; i++) {\r\n                let overloadFactory = extensibility.visualApiVersions[i].overloads;\r\n                if (_.isFunction(overloadFactory)) {\r\n                    _.assign(overloads, overloadFactory(visualNew));\r\n                }\r\n            }\r\n            return overloads;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n    import VisualException = powerbi.visuals.telemetry.VisualException;\r\n\r\n    export class VisualSafeExecutionWrapper implements powerbi.IVisual, WrappedVisual {\r\n        constructor(\r\n            private wrappedVisual: powerbi.IVisual,\r\n            private visualInfo: VisualTelemetryInfo,\r\n            private telemetryService: ITelemetryService,\r\n            private silent?: boolean) { }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            if (this.wrappedVisual.init) {\r\n                this.executeSafely(() => this.wrappedVisual.init(options));\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.wrappedVisual.destroy)\r\n                this.executeSafely(() => this.wrappedVisual.destroy());\r\n        }\r\n        \r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (this.wrappedVisual.update)\r\n                this.executeSafely(() => this.wrappedVisual.update(options));\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport, resizeMode: ResizeMode): void {\r\n            if (this.wrappedVisual.onResizing)\r\n                this.executeSafely(() => this.wrappedVisual.onResizing(finalViewport, resizeMode));\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.wrappedVisual.onDataChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onDataChanged(options));\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.wrappedVisual.onViewModeChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onViewModeChanged(viewMode));\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.wrappedVisual.onClearSelection)\r\n                this.executeSafely(() => this.wrappedVisual.onClearSelection());\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.wrappedVisual.canResizeTo)\r\n                return this.executeSafely(() => this.wrappedVisual.canResizeTo(viewport));\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (this.wrappedVisual.enumerateObjectInstances)\r\n                return this.executeSafely(() => this.wrappedVisual.enumerateObjectInstances(options));\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            let visual = <powerbi.IVisual & WrappedVisual>this.wrappedVisual;\r\n            return visual.unwrap ? visual.unwrap() : visual;\r\n        }\r\n        \r\n        public isCustomVisual(): boolean {\r\n            return this.visualInfo.custom;\r\n        }\r\n\r\n        private executeSafely(callback: () => any): any {\r\n            try {\r\n                return callback();\r\n            } catch (exception) {\r\n                if (!this.silent) {\r\n                    console.error(\"Visual exception\", exception.stack || exception);\r\n                }\r\n\r\n                if (this.telemetryService) {\r\n                    this.telemetryService.logEvent(\r\n                        VisualException,\r\n                        this.visualInfo.name,\r\n                        this.visualInfo.custom,\r\n                        this.visualInfo.apiVersion,\r\n                        exception.fileName,\r\n                        exception.lineNumber,\r\n                        exception.columnNumber,\r\n                        exception.stack,\r\n                        exception.message);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v100 {\r\n    let overloadFactory: VisualVersionOverloadFactory = (visual: IVisual) => {\r\n        return {\r\n            update: (options: powerbi.VisualUpdateOptions) => {\r\n                if (visual.update) {\r\n                    let type = options.type || VisualUpdateType.Data;\r\n                    if(type & VisualUpdateType.Resize && options.resizeMode === ResizeMode.Resized) {\r\n                        type |= VisualUpdateType.ResizeEnd;\r\n                    } \r\n                    visual.update({\r\n                        viewport: options.viewport,\r\n                        dataViews: options.dataViews,\r\n                        type: type\r\n                    });\r\n                }\r\n            },\r\n            destroy: () => {\r\n                if (visual.destroy) {\r\n                    visual.destroy();\r\n                }\r\n            },\r\n            enumerateObjectInstances: (options: EnumerateVisualObjectInstancesOptions) => {\r\n                if (visual.enumerateObjectInstances) {\r\n                    return visual.enumerateObjectInstances(options);\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    let hostAdapter: VisualHostAdapter = (host: IVisualHostServices): IVisualHost => {\r\n        return {};\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.0.0',\r\n        overloads: overloadFactory,\r\n        hostAdapter: hostAdapter\r\n    });\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v110 {\r\n    let hostAdapter: VisualHostAdapter = (host: powerbi.IVisualHostServices): IVisualHost => {\r\n        return {\r\n            createSelectionIdBuilder: () => new visuals.SelectionIdBuilder(),\r\n            createSelectionManager: () => new SelectionManager({ hostServices: host })\r\n        };\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.1.0',\r\n        hostAdapter: hostAdapter\r\n    });\r\n}"],"sourceRoot":"../ts/visualsExtensibility"}